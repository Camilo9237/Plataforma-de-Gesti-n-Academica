<div class="group-detail-page">
  <header class="page-header">
    <button class="back-btn" (click)="goBack()">â† Volver</button>
    <div class="header-content" *ngIf="group">
      <div class="title-section">
        <h1>{{ group.nombre_curso }}</h1>
        <div class="metadata">
          <span class="badge">{{ group.codigo_curso }}</span>
          <span class="badge">Grado {{ group.grado }}</span>
          <span class="badge">Periodo {{ group.periodo }}</span>
        </div>
      </div>
      <div class="teacher-info" *ngIf="group.docente_info">
        <div class="label">Docente</div>
        <div class="name">{{ group.docente_info.nombres }} {{ group.docente_info.apellidos }}</div>
        <div class="specialty">{{ group.docente_info.especialidad }}</div>
      </div>
    </div>
  </header>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando informaciÃ³n del grupo...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-state">
    <div class="error-icon">âš ï¸</div>
    <p>{{ error }}</p>
    <button class="btn-primary" (click)="loadGroupDetails()">Reintentar</button>
  </div>

  <!-- Content -->
  <div *ngIf="!loading && !error" class="content">
    <!-- EstadÃ­sticas -->
    <section class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-value">{{ stats.total_students }}</div>
        <div class="stat-label">Total Estudiantes</div>
        <div class="stat-meta">Capacidad: {{ group?.capacidad_max || 'â€”' }}</div>
      </div>

      <div class="stat-card success">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value">{{ stats.aprobados }}</div>
        <div class="stat-label">Aprobados</div>
        <div class="stat-meta">Promedio â‰¥ 3.0</div>
      </div>

      <div class="stat-card warning">
        <div class="stat-icon">âš ï¸</div>
        <div class="stat-value">{{ stats.reprobados }}</div>
        <div class="stat-label">Reprobados</div>
        <div class="stat-meta">Promedio < 3.0</div>
      </div>

      <div class="stat-card info">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-value">{{ stats.promedio_general }}</div>
        <div class="stat-label">Promedio General</div>
        <div class="stat-meta">Del grupo</div>
      </div>

      <div class="stat-card neutral">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-value">{{ stats.sin_notas }}</div>
        <div class="stat-label">Sin Calificaciones</div>
        <div class="stat-meta">Pendientes</div>
      </div>
    </section>

    <!-- Quick Actions -->
    <section class="quick-actions">
      <button class="action-btn primary" (click)="goToGrades()">
        <span class="icon">ğŸ“–</span>
        <span class="text">Registrar Notas</span>
      </button>
      <button class="action-btn secondary" (click)="goToAttendance()">
        <span class="icon">ğŸ—“ï¸</span>
        <span class="text">Tomar Asistencia</span>
      </button>
      <button class="action-btn tertiary">
        <span class="icon">ğŸ“„</span>
        <span class="text">Generar Reporte</span>
      </button>
    </section>

    <!-- Students List -->
    <section class="students-section card">
      <div class="section-header">
        <h2>Lista de Estudiantes</h2>
        <div class="filters">
          <input type="text" placeholder="Buscar estudiante..." class="search-input" />
          <select class="filter-select">
            <option value="all">Todos</option>
            <option value="aprobados">Aprobados</option>
            <option value="reprobados">Reprobados</option>
            <option value="sin-notas">Sin notas</option>
          </select>
        </div>
      </div>

      <div *ngIf="students.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ“­</div>
        <p>No hay estudiantes matriculados en este grupo</p>
      </div>

      <table class="students-table" *ngIf="students.length > 0">
        <thead>
          <tr>
            <th>CÃ³digo</th>
            <th>Nombre</th>
            <th>Promedio</th>
            <th>Calificaciones</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let student of students" class="student-row">
            <td class="code">{{ student.student_code }}</td>
            <td class="name">
              <div class="student-name">{{ student.student_name }}</div>
            </td>
            <td class="average">
              <span 
                class="grade-badge" 
                [class.pass]="student.average >= 3.0" 
                [class.fail]="student.average < 3.0 && student.average > 0"
                [class.empty]="!student.average || student.average === 0">
                {{ student.average || 'â€”' }}
              </span>
            </td>
            <td class="grades-count">
              <span class="count-badge">{{ student.grades.length }} notas</span>
            </td>
            <td class="status">
              <span 
                class="status-badge" 
                [class.approved]="student.average >= 3.0"
                [class.failed]="student.average < 3.0 && student.average > 0"
                [class.pending]="!student.average || student.average === 0">
                {{ student.average >= 3.0 ? 'Aprobado' : (student.average > 0 ? 'Reprobado' : 'Pendiente') }}
              </span>
            </td>
            <td class="actions">
              <button class="btn-icon" (click)="viewStudentDetail(student)" title="Ver detalles">
                ğŸ‘ï¸
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>
</div>