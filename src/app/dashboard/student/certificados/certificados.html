<a class="back" routerLink="/dashboard/student">‚Üê Volver al Dashboard</a>

<section class="certificados-root">
  <header class="header">
    <h2>Certificados Acad√©micos</h2>
    <p class="hint">Descarga tus certificados oficiales en formato PDF</p>
  </header>

  <!-- Mensajes -->
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <div *ngIf="error" class="alert alert-error">
    ‚ùå {{ error }}
  </div>

  <!-- Informaci√≥n del Estudiante -->
  <div class="card student-info" *ngIf="profile">
    <div class="profile-header">
      <div class="profile-avatar">
        {{ profile.nombres.charAt(0) }}{{ profile.apellidos.charAt(0) }}
      </div>
      <div class="profile-details">
        <h3>{{ profile.nombres }} {{ profile.apellidos }}</h3>
        <div class="profile-meta">
          <span class="meta-item">
            <strong>C√≥digo:</strong> {{ profile.codigo_est }}
          </span>
          <span class="meta-item">
            <strong>Documento:</strong> {{ profile.tipo_doc }} {{ profile.documento }}
          </span>
          <span class="meta-item">
            <strong>Grado:</strong> {{ profile.grado || 'N/A' }}¬∞
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Instrucciones -->
  <div class="card instructions">
    <h3>‚ÑπÔ∏è Instrucciones de Descarga</h3>
    <ol>
      <li>Selecciona el tipo de certificado que necesitas</li>
      <li>Haz clic en el bot√≥n "Descargar PDF"</li>
      <li>El certificado se generar√° autom√°ticamente</li>
      <li>Guarda el archivo en tu dispositivo</li>
    </ol>
    <p class="note">
      <strong>Importante:</strong> Los certificados descargados tienen validez oficial 
      y pueden ser utilizados para tr√°mites acad√©micos y administrativos.
    </p>
  </div>

  <!-- Grid de Certificados -->
  <div class="certificados-grid">
    <div class="certificado-card card" *ngFor="let cert of certificados">
      <div class="certificado-header">
        <div class="certificado-icon">{{ cert.icon }}</div>
        <div class="certificado-badge" *ngIf="cert.disponible">Disponible</div>
        <div class="certificado-badge unavailable" *ngIf="!cert.disponible">No Disponible</div>
      </div>

      <div class="certificado-body">
        <h3 class="certificado-title">{{ cert.nombre }}</h3>
        <p class="certificado-description">{{ cert.descripcion }}</p>
      </div>

      <div class="certificado-footer">
        <button 
          class="btn-download" 
          [disabled]="!cert.disponible || isLoading(cert.id)"
          (click)="descargarCertificado(cert.id)">
          <span *ngIf="!isLoading(cert.id)">üì• Descargar PDF</span>
          <span *ngIf="isLoading(cert.id)">‚è≥ Generando...</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Informaci√≥n Adicional -->
  <div class="card info-adicional">
    <h3>üìå Informaci√≥n Adicional</h3>
    <div class="info-grid">
      <div class="info-item">
        <div class="info-icon">üïí</div>
        <div class="info-content">
          <strong>Tiempo de Generaci√≥n</strong>
          <p>Los certificados se generan instant√°neamente al hacer clic en descargar</p>
        </div>
      </div>
      <div class="info-item">
        <div class="info-icon">üîí</div>
        <div class="info-content">
          <strong>Seguridad</strong>
          <p>Todos los certificados incluyen firma digital y c√≥digo de verificaci√≥n</p>
        </div>
      </div>
      <div class="info-item">
        <div class="info-icon">üìß</div>
        <div class="info-content">
          <strong>¬øNecesitas Ayuda?</strong>
          <p>Contacta a secretar√≠a acad√©mica: secretaria@colegio.edu</p>
        </div>
      </div>
    </div>
  </div>
</section>